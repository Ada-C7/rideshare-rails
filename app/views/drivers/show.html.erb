<% content_for :drivers do %>

     <section class="yield">
          <h1 class="title"> <%= @driver.name %> </h1>
          <ul class="list">
               <li> <span> Driver Name: </span> <%= @driver.name %> </li>
               <li> <span> Driver VIN: </span> <%= @driver.vin %> </li>
               <li> <span> Driver Status: </span> <%= @driver.status ? "Available" : "Not Available"%> </li>
               <% if @driver.trips.average("rating") %>
                  <li><span> Average Rating: </span> <%= @driver.trips.average("rating").round(2) %></li>
               <% end %>
               <% if @driver.trips.length > 0 %>
                   <li><span>Total Earnings: </span> $<%= @driver.earnings %></li>
                   <ul>
                        <li><span> Trips: </span></li>
                        <% @driver.trips.map do | trip | %>
                            <li>
                                <%= link_to "Trip ##{trip.id}", trip_path(trip.id) %> with <span>passenger</span> <%= trip.passenger.name %>.
                            </li>
                        <% end %>
                   </ul>
               <% else %>
                   <li><span>Driver has no trips to display.</span></li>
               <% end %>
          </ul>

          <p><%= button_to "Edit", edit_driver_path, method: :get %> </p>
          <p>
               <%=
                    button_to "Delete", driver_path, method: :delete,
                    data: { confirm: "Are you confident you'd like to delete this driver?" },
                    method: :delete
               %>
          </p>
     </section>
<% end %>
